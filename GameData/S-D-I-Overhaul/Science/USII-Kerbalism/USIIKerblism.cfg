// Add new experiments to the relevant parts

@PART[USBasicMicroSatWedge]:NEEDS[FeatureScience]
{
	// Ensure no duplicate experiments
	!MODULE[Experiment]:HAS[#experiment_id[temperatureScan]] {}
	!MODULE[Experiment]:HAS[#experiment_id[magnetometer]] {}
	!MODULE[Experiment]:HAS[#experiment_id[geigerCounter]] {}

	MODULE
	{
		name = Experiment
		experiment_id = temperatureScan
	}
	MODULE
	{
		name = Experiment
		experiment_id = magnetometer
	}
	MODULE
	{
		name = Experiment
		experiment_id = geigerCounter
	}
}

@PART[USAdvancedMicroSatWedge]:NEEDS[FeatureScience]
{
	// Ensure no duplicate experiments
	!MODULE[Experiment]:HAS[#experiment_id[temperatureScan]] {}
	!MODULE[Experiment]:HAS[#experiment_id[magnetometer]] {}
	!MODULE[Experiment]:HAS[#experiment_id[geigerCounter]] {}
	!MODULE[Experiment]:HAS[#experiment_id[KerbalismResourceScanner]] {}

	MODULE
	{
		name = Experiment
		experiment_id = temperatureScan
	}
	MODULE
	{
		name = Experiment
		experiment_id = magnetometer
	}
	MODULE
	{
		name = Experiment
		experiment_id = geigerCounter
	}
	MODULE
	{
		name = Experiment
		experiment_id = KerbalismResourceScanner
	}
}

@PART[USMapCamWedge]:NEEDS[FeatureScience]
{
	// Ensure no duplicate experiments
	!MODULE[Experiment]:HAS[#experiment_id[KerbalismResourceScanner]] {}

	MODULE
	{
		name = Experiment
		experiment_id = KerbalismResourceScanner
	}
}


@PART[USGooBayWedge]:NEEDS[FeatureScience]
{
	!MODULE:HAS[#experimentID[mysteryGoo]] {}
	MODULE
	{
		name = Experiment
		experiment_id = mysteryGoo
	}
}

@PART[USMatBayWedge]:NEEDS[FeatureScience]
{
	!MODULE:HAS[#experimentID[mobileMaterialsLab]] {}
	MODULE
	{
		name = Experiment
		experiment_id = mobileMaterialsLab
	}
}

// Fluid Spectrometer Setup and atmospheric experiments

@PART[USFluidSpectroWedge]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{

	MODULE
	{
		name = Configure
		title = Spectro Variometer Setup
		slots = 1
		
		SETUP
		{
			name = None
			desc = Empty slot for mass and cost savings, should you not require any instruments installed.
		}
		SETUP
		{
			name = Atmospheric Science
			desc = Configures the part as a science instrument, allowing for a selection of atmospheric instruments.
			MODULE
			{
				type = Configure
				id_field = title
				id_value = Atmospheric Science
			}
		}
		SETUP
		{
			name = Underwater Science
			desc = Configures the part as a science instrument, allowing for a selection of underwater experiments.
			MODULE
			{
				type = Configure
				id_field = title
				id_value = Underwater Science
			}
		}
		SETUP
		{
			name = Atmospheric Harvester
			desc = Configures the part as an atmospheric harvester, allowing for extraction of resources from the atmosphere.
			MODULE
			{
				type = Configure
				id_field = title
				id_value = Atmospheric Filter
			}
		}
		SETUP
		{
			name = Atmospheric Fluid Spectro-Variometer
			desc = Installs the Atmospheric Fluid Spectro-Variometer for atmospheric analysis.
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = atmosphereAnalysis
			}
		}
		SETUP
		{
			name = PresMat Barometer
			desc = Installs the PresMat Barometer for pressure readings.
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = barometerScan
			}
		}
		SETUP
		{
			name = CURVE
			desc = Checking Undulating Radial Vectors of Environment: Ensuring the planet is still round from the upper atmosphere.
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_CURVE
			}
		}
		SETUP
		{
			name = WING
			desc = Wandering Investigation Not on the Ground: Watching the ground zip past!
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_WING
			}
		}
		SETUP
		{
			name = CLOUD
			desc = Cumulative Longitudinal Overland Understanding of Dynamic: Understanding cloud dynamics.
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_CLOUD
			}
		}
	}
}

// Goo and Material Bay

@PART[USGooBayWedge]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	@MODULE[Experiment]:HAS[#experiment_id[mysteryGoo]]
	{
		UPGRADES
		{
			UPGRADE
			{
				name = Goo-Storage-Upgrade
				techRequired = #$../../../@KERBALISM_HDD_SIZES/STOCK/PRIVATE_DRIVES/MysteryGoo/UpgradeTech$
				sample_amount = #$../../#sample_amount$
				@sample_amount *= #$../../../@KERBALISM_HDD_SIZES/STOCK/PRIVATE_DRIVES/MysteryGoo/SampleReservoirUpgrade$
			}
		}
	}
}

@PART[USMatBayWedge]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	UPGRADES
	{
		UPGRADE
		{
			name = MatBay-Storage-Upgrade
			techRequired = #$../../../@KERBALISM_HDD_SIZES/STOCK/PRIVATE_DRIVES/MaterialsBay/UpgradeTech$
			sample_amount = #$../../#sample_amount$
			@sample_amount *= #$../../../@KERBALISM_HDD_SIZES/STOCK/PRIVATE_DRIVES/MaterialsBay/SampleReservoirUpgrade$
		}
	}
}

// Orbital Scanner Config for Satellite Wedges

@PART[USBasicMicroSatWedge]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	MODULE
	{
		name = Configure
		title = Orbital Scanner
		slots = 1

		SETUP
		{
			name = None
			desc = Empty slot for mass and cost savings, should you not require any experiments installed.
		}

		SETUP
		{
			name = GRAVMAX Negative Gravioli Detector
			desc = Installs the GRAVMAX Negative Gravioli Detector on the Science Instrument Unit, allowing the vessel to perform gravimetric scans.
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = gravityScan
			}
		}
		SETUP
		{
			name = BEEP
			desc = Biome Exclusive Experiment Package
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_BEEP
			}
		}
		SETUP
		{
			name = DING
			desc = Dynamic Investigation in Null Gravity
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_DING
			}
		}
		SETUP
		{
			name = TICK
			desc = Transmissible Investigation of Cosmic Knowledge
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_TICK
			}
		}
	}
}

@PART[USAdvancedMicroSatWedge]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	MODULE
	{
		name = Configure
		title = Orbital Scanner
		slots = 1

		SETUP
		{
			name = None
			desc = Empty slot for mass and cost savings, should you not require any experiments installed.
		}

		SETUP
		{
			name = GRAVMAX Negative Gravioli Detector
			desc = Installs the GRAVMAX Negative Gravioli Detector on the Science Instrument Unit, allowing the vessel to perform gravimetric scans.
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = gravityScan
			}
		}
		SETUP
		{
			name = BEEP
			desc = Biome Exclusive Experiment Package
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_BEEP
			}
		}
		SETUP
		{
			name = DING
			desc = Dynamic Investigation in Null Gravity
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_DING
			}
		}
		SETUP
		{
			name = TICK
			desc = Transmissible Investigation of Cosmic Knowledge
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_TICK
			}
		}
	}
}

@PART[USMapCamWedge]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	MODULE
	{
		name = Configure
		title = Orbital Scanner
		slots = 1

		SETUP
		{
			name = None
			desc = Empty slot for mass and cost savings, should you not require any experiments installed.
		}

		SETUP
		{
			name = GRAVMAX Negative Gravioli Detector
			desc = Installs the GRAVMAX Negative Gravioli Detector on the Science Instrument Unit, allowing the vessel to perform gravimetric scans.
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = gravityScan
			}
		}
		SETUP
		{
			name = BEEP
			desc = Biome Exclusive Experiment Package
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_BEEP
			}
		}
		SETUP
		{
			name = DING
			desc = Dynamic Investigation in Null Gravity
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_DING
			}
		}
		SETUP
		{
			name = TICK
			desc = Transmissible Investigation of Cosmic Knowledge
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = kerbalism_TICK
			}
		}
	}
}
